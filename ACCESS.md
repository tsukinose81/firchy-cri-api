# Minecraftã‚µãƒ¼ãƒãƒ¼ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹æ–¹æ³•

## ğŸ® æ¥ç¶šã‚¢ãƒ‰ãƒ¬ã‚¹

### ãƒ›ã‚¹ãƒˆãƒã‚·ãƒ³ã‹ã‚‰
```
ã‚¢ãƒ‰ãƒ¬ã‚¹: 192.168.121.232:25565
```

Minecraftã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã§ã€ãƒãƒ«ãƒãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ â†’ ã‚µãƒ¼ãƒãƒ¼ã‚’è¿½åŠ  â†’ `192.168.121.232:25565`

### VMå†…éƒ¨ã‹ã‚‰
```bash
# æ–¹æ³•1: ã‚³ãƒ³ãƒ†ãƒŠIPã«ç›´æ¥æ¥ç¶š
10.88.0.29:25565

# æ–¹æ³•2: localhostçµŒç”±ï¼ˆiptables NATï¼‰
localhost:25565
```

## ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯æ§‹æˆ

```
[Minecraft Client on Host]
        â†“
   192.168.121.232:25565 (Vagrant VM)
        â†“
   iptables DNAT
        â†“
   10.88.0.29:25565 (Kata Container)
        â†“
   Minecraft Server (Paper 1.21.8)
        â†“
   Cloud Hypervisor VM
```

## æ¥ç¶šç¢ºèª

### ãƒ›ã‚¹ãƒˆã‹ã‚‰
```bash
# ãƒãƒ¼ãƒˆãŒé–‹ã„ã¦ã„ã‚‹ã‹ç¢ºèª
nc -zv 192.168.121.232 25565
# ã¾ãŸã¯
telnet 192.168.121.232 25565
```

### VMå†…ã‹ã‚‰
```bash
vagrant ssh

# ã‚³ãƒ³ãƒ†ãƒŠIPã¸ç›´æ¥
nc -zv 10.88.0.29 25565

# localhostã¸ï¼ˆiptablesçµŒç”±ï¼‰
nc -zv localhost 25565
```

## ã‚µãƒ¼ãƒãƒ¼æƒ…å ±

- **ã‚µãƒ¼ãƒãƒ¼ã‚¿ã‚¤ãƒ—:** Paper 1.21.8
- **å®Ÿè¡Œç’°å¢ƒ:** Kata Containers (Cloud Hypervisor)
- **ãƒ¡ãƒ¢ãƒª:** 1GB (ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ)
- **é›£æ˜“åº¦:** normal
- **æœ€å¤§ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼æ•°:** 20

## ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### æ¥ç¶šã§ããªã„å ´åˆ

1. **Minecraftã‚µãƒ¼ãƒãƒ¼ãŒèµ·å‹•ã—ã¦ã„ã‚‹ã‹ç¢ºèª:**
   ```bash
   vagrant ssh -c "sudo crictl ps | grep minecraft"
   ```

2. **iptables ãƒ«ãƒ¼ãƒ«ãŒè¨­å®šã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª:**
   ```bash
   vagrant ssh -c "sudo iptables -t nat -L -n -v | grep 25565"
   ```

3. **ã‚³ãƒ³ãƒ†ãƒŠãŒå®Ÿéš›ã«ãƒªãƒƒã‚¹ãƒ³ã—ã¦ã„ã‚‹ã‹ç¢ºèª:**
   ```bash
   vagrant ssh -c "sudo crictl exec 63b5da47bb3d5 netstat -tlnp | grep 25565"
   ```

### ãƒ•ã‚¡ã‚¤ã‚¢ã‚¦ã‚©ãƒ¼ãƒ«ã®å•é¡Œ

ãƒ›ã‚¹ãƒˆãƒã‚·ãƒ³ã«ãƒ•ã‚¡ã‚¤ã‚¢ã‚¦ã‚©ãƒ¼ãƒ«ãŒã‚ã‚‹å ´åˆã€192.168.121.232ã¸ã®æ¥ç¶šã‚’è¨±å¯ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

## iptables ãƒ«ãƒ¼ãƒ«ã®æ°¸ç¶šåŒ–

ç¾åœ¨ã®iptablesãƒ«ãƒ¼ãƒ«ã¯å†èµ·å‹•å¾Œã«æ¶ˆãˆã¾ã™ã€‚æ°¸ç¶šåŒ–ã™ã‚‹ã«ã¯:

```bash
vagrant ssh
sudo apt-get install iptables-persistent
sudo netfilter-persistent save
```

ã¾ãŸã¯ã€Ansibleãƒ­ãƒ¼ãƒ«ã«è¿½åŠ ã—ã¦è‡ªå‹•è¨­å®šã—ã¾ã™ã€‚
